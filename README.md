# "Тебе хреново" - интерактивная блок-схема для тех, кто забывает, как о себе заботиться

В этом репозитории лежат исходники от перевода [You feel like shit](http://philome.la/jace_harr/you-feel-like-shit-an-interactive-self-care-guide/play) от [Jace Harr](https://jaceharr.com/about/).

[Перевод выложен тут.](http://berekuk.ru/shit.html). Пожалуйста, не копируйте его в другие места, пока мы не закончили редактуру и исправление багов.

Технически блок-схема сделана на движке [Twine](https://twinery.org/), но из-за необходимости двух почти одинаковых веток вопросов для мужского и женского рода я редактирую сгенерированный html. (В Twine есть поддержка переменных, но шаблонизатор оказался слишком неудобным, или я плохо в нём разбираюсь.)

Итоговый html-файл генерируется скриптом `process.py`. Его можно копипастить куда угодно, у него нет зависимостей, насколько я понял.

`process.py` собирает результат из:

* `pre.html` (копируется как есть; обратите внимание - в нём есть google analytics-счётчик от сайта berekuk.ru)
* `translated.html` - в нём перевод основного текста.
* `post.html` (копируется как есть)

Соответственно, исправлять перевод нужно в `translated.html`.

# Про формат translated.html

Большая часть translated.html, начиная с комментария `START GENDERING`, и до комментария `END GENDERING`, обрабатывается скриптом и копируется дважды. Один раз для мужского рода, другой раз для женского.

Чтобы различать мужской и женский род, в тексте между комментариями можно использовать формы вида `просыпал(ся)(ась)`.

Ссылки на следующие шаги могут выглядеть двумя способами:

* [[Следующий шаг|Еда]]
* [[Еда]]

В первом варианте текст до `|` - это текст на ссылке, а после черты - идентификатор. Во втором варианте - одновременно и текст, и идентификатор.

Идентификаторы нигде не отображаются, туда можно писать что угодно, главное, чтобы они были уникальными (местами они странны и непонятны без контекста, например, `Я не знаю`).
